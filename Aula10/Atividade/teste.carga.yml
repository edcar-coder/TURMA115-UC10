config:
  target: "http://localhost:3000"
  phases:
    - duration: 30
      arrivalRate: 5
scenarios:
  - flow:
      - get:
          url: "/livros"
      - post:
          url: "/livros"
          json:
            titulo: "Livro dia do estudante"
            autor: "Artillery"
            ano_publicacao: 2025
            genero: "Aventura"
            preco: 150.85
          capture:
            - json: "$.livro.id"
              as: "livroId"
      - get:
          url: "/livros/{{ livroId }}"
          capture:
            - json: "$.livro.titulo"
              as: "livroTitulo"
      - put:
          url: "/livros/{{ livroId }}"
          json:
            titulo: "Livro dia do estudante o retorno"
            autor: "Joel Santos"
            ano_publicacao: 2023
            genero: "Terror"
            preco: 250.85
      - delete:
          url: "/livros/{{ livroId }}"
      - get:
          url: "/livros/busca?titulo={{ livroTitulo }}"
